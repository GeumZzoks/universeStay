<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.universestay.project.chat.dao.ChatMessageDao">

  <insert id="insertChat" parameterType="ChattingMessageDto">
    INSERT INTO ChattingMessage (chatting_room_id, user_id, chat_ctt,
                                 created_id, updated_id)
    VALUES ( #{chatting_room_id}, #{user_id}, #{chat_ctt}
           , #{created_id}, #{updated_id})
  </insert>

  <select id="selectChatList" parameterType="String" resultType="map">
    SELECT cm.chat_id,
           cm.chatting_room_id,
           cm.user_id,
           u.user_name,
           cm.chat_date,
           cm.chat_ctt
    FROM ChattingMessage cm
           JOIN
         User u ON cm.user_id = u.user_id
    WHERE cm.chatting_room_id = #{chatting_room_id}
    ORDER BY cm.chat_date;
  </select>

</mapper>